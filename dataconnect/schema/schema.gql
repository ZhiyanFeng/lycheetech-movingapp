enum VehicleStatus {
  ACTIVE
  MAINTENANCE
  INACTIVE
}

enum RequestStatus {
  OPEN
  ASSIGNED
  COMPLETED
  CANCELLED
}

enum BidStatus {
  PENDING
  ACCEPTED
  REJECTED
}

enum JobStatus {
  SCHEDULED
  IN_PROGRESS
  COMPLETED
  CANCELLED
}

enum PaymentStatus {
  PENDING
  PAID
  FAILED
  REFUNDED
}

enum InvoiceStatus {
  ISSUED
  PAID
  OVERDUE
  CANCELLED
}

type User @table {
  displayName: String!
  email: String!
  createdAt: Timestamp! @default(expr: "request.time")
  phoneNumber: String
  address: String
}

type Mover @table {
  companyName: String!
  email: String!
  createdAt: Timestamp! @default(expr: "request.time")
  phoneNumber: String
  address: String
  description: String
  serviceAreas: [String]
  avatarUrl: String
  vehicleUrl: String
}

type Vehicle @table {
  mover: Mover!
  make: String!
  model: String!
  year: Int!
  licensePlate: String!
  capacity: Float!
  createdAt: Timestamp! @default(expr: "request.time")
  status: VehicleStatus!
}

type MovingRequest @table {
  user: User!
  originAddress: String!
  destinationAddress: String!
  moveDate: Date!
  createdAt: Timestamp! @default(expr: "request.time")
  status: RequestStatus!
  description: String
  itemDetails: String
}

type Bid @table {
  mover: Mover!
  movingRequest: MovingRequest!
  amount: Float!
  createdAt: Timestamp! @default(expr: "request.time")
  status: BidStatus!
  details: String
}

type Job @table {
  movingRequest: MovingRequest!
  mover: Mover!
  bid: Bid!
  vehicle: Vehicle!
  startDate: Date!
  status: JobStatus!
  createdAt: Timestamp! @default(expr: "request.time")
  completionDate: Date
  notes: String
  # References to payment/invoice are best handled by relations from those types unless 1:1 specifically enforced
}

type Inventory @table {
  job: Job!
  name: String!
  quantity: Int!
  description: String
}

type Payment @table {
  job: Job!
  amount: Float!
  paymentType: String!
  paymentDate: Timestamp! @default(expr: "request.time")
  status: PaymentStatus!
  transactionId: String
}

type Invoice @table {
  job: Job!
  amountDue: Float!
  dueDate: Date!
  createdAt: Timestamp! @default(expr: "request.time")
  status: InvoiceStatus!
  issueDate: Date!
  payment: Payment
}
